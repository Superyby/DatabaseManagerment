<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‡´ æˆ‘æœ€äº²çˆ±çš„ä½ </title>
    <style>
        /* ==================== åŸºç¡€è®¾å®š ==================== */
        :root {
            --bg-color: #0f172a;
            --text-primary: #f8fafc;
            --text-secondary: #94a3b8;
            --accent-pink: #f472b6;
            --accent-gold: #fbbf24;
            --card-bg: rgba(255, 255, 255, 0.05);
            --card-border: rgba(255, 255, 255, 0.1);
            --font-hand: 'Microsoft YaHei', sans-serif; /* å®é™…ä½¿ç”¨å¯å¼•å…¥æ‰‹å†™å­—ä½“ */
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            background-color: var(--bg-color);
            color: var(--text-primary);
            font-family: var(--font-hand);
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* éšè—æ»šåŠ¨æ¡ä½†ä¿ç•™åŠŸèƒ½ */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: var(--bg-color); }
        ::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 4px; }

        /* ==================== åœºæ™¯ä¸€ï¼šä¿¡å°å¼€åœº ==================== */
        #intro-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at center, #1e293b 0%, #0f172a 100%);
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            transition: opacity 1s ease, visibility 1s;
        }

        .envelope-container {
            position: relative;
            cursor: pointer;
            transition: transform 0.5s;
        }

        .envelope-container:hover {
            transform: scale(1.05);
        }

        .envelope {
            width: 300px;
            height: 200px;
            background: #fff;
            position: relative;
            border-radius: 10px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        .envelope-flap {
            position: absolute;
            top: 0;
            width: 0;
            height: 0;
            border-left: 150px solid transparent;
            border-right: 150px solid transparent;
            border-top: 110px solid #fca5a5; /* ä¿¡å°ç›–é¢œè‰² */
            transform-origin: top;
            transition: transform 0.6s 0.2s ease-in-out, z-index 0.2s;
            z-index: 10;
            filter: drop-shadow(0 2px 5px rgba(0,0,0,0.2));
        }

        .envelope-body {
            position: absolute;
            bottom: 0;
            width: 0;
            height: 0;
            border-left: 150px solid #fdba74;
            border-right: 150px solid #fdba74;
            border-bottom: 100px solid #fcd34d;
            border-top: 100px solid transparent;
            z-index: 5;
            border-radius: 0 0 10px 10px;
        }

        .letter-preview {
            position: absolute;
            width: 260px;
            height: 160px;
            background: #fff;
            color: #333;
            padding: 20px;
            font-size: 14px;
            line-height: 1.6;
            z-index: 1;
            transition: transform 0.8s 0.5s ease-in-out;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .letter-preview h3 {
            font-size: 18px;
            color: var(--accent-pink);
            margin-bottom: 10px;
            font-family: 'Times New Roman', serif;
        }

        .click-hint {
            margin-top: 30px;
            color: var(--text-secondary);
            font-size: 14px;
            letter-spacing: 2px;
            animation: pulse 2s infinite;
        }

        /* å¼€å¯åŠ¨ç”»ç±» */
        .envelope-container.open .envelope-flap {
            transform: rotateX(180deg);
            z-index: 1;
        }
        .envelope-container.open .letter-preview {
            transform: translateY(-120px);
            z-index: 20;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        /* ==================== ä¸»å†…å®¹åŒº ==================== */
        #main-content {
            opacity: 0;
            transition: opacity 1.5s ease;
            display: none; /* åˆå§‹éšè— */
        }

        /* èƒŒæ™¯æ˜Ÿç©º Canvas */
        #star-canvas {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: -1;
            pointer-events: none;
        }

        /* é€šç”¨å®¹å™¨ */
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 100px 20px;
        }

        /* æ ‡é¢˜æ ·å¼ */
        .section-title {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 60px;
            font-weight: 300;
            letter-spacing: 5px;
            position: relative;
            display: inline-block;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .section-title::after {
            content: '';
            display: block;
            width: 60px;
            height: 2px;
            background: var(--accent-pink);
            margin: 20px auto 0;
            border-radius: 2px;
        }

        .subtitle {
            text-align: center;
            color: var(--text-secondary);
            font-size: 1.1rem;
            margin-top: 10px;
            font-style: italic;
        }

        /* ==================== åœºæ™¯äºŒï¼šæ‹ç«‹å¾—ç…§ç‰‡å¢™ ==================== */
        .photo-wall {
            position: relative;
            height: 600px;
            margin: 50px 0;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            perspective: 1000px;
        }

        /* ç»³å­ */
        .rope {
            position: absolute;
            top: 50px;
            width: 80%;
            height: 2px;
            background: rgba(255,255,255,0.3);
            box-shadow: 0 2px 10px rgba(0,0,0,0.5);
            z-index: 0;
        }

        .polaroid {
            position: absolute;
            width: 220px;
            background: #fff;
            padding: 15px 15px 60px 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            transition: all 0.6s cubic-bezier(0.25, 0.8, 0.25, 1);
            cursor: pointer;
            transform-style: preserve-3d;
            color: #333;
        }

        .polaroid img {
            width: 100%;
            height: 180px;
            object-fit: cover;
            filter: sepia(20%);
            transition: filter 0.3s;
        }

        .polaroid:hover {
            z-index: 100;
            transform: scale(1.2) rotate(0deg) !important;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            filter: brightness(1.1);
        }
        
        .polaroid:hover img {
            filter: sepia(0%);
        }

        .polaroid-caption {
            position: absolute;
            bottom: 15px;
            left: 0;
            width: 100%;
            text-align: center;
            font-family: 'Comic Sans MS', cursive, sans-serif; /* æ¨¡æ‹Ÿæ‰‹å†™ */
            font-size: 16px;
            color: #555;
        }

        /* èƒŒé¢æƒ…è¯ */
        .polaroid-back {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: #fdfbf7;
            backface-visibility: hidden;
            transform: rotateY(180deg);
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            text-align: center;
            font-size: 14px;
            color: #444;
            line-height: 1.6;
            border: 1px dashed #ccc;
            opacity: 0;
            transition: opacity 0.4s;
        }

        .polaroid.flipped {
            transform: rotateY(180deg) !important;
        }
        
        .polaroid.flipped .polaroid-back {
            opacity: 1;
        }
        
        .polaroid.flipped img, 
        .polaroid.flipped .polaroid-caption {
            opacity: 0;
        }

        /* ==================== åœºæ™¯ä¸‰ï¼šæ˜Ÿç©ºè¿çº¿æ—¶é—´è½´ ==================== */
        .timeline-section {
            position: relative;
            padding: 100px 0;
        }

        .timeline-line {
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(to bottom, transparent, rgba(244, 114, 182, 0.5), transparent);
            transform: translateX(-50%);
        }

        .timeline-item {
            position: relative;
            width: 50%;
            padding: 40px;
            opacity: 0;
            transform: translateY(50px);
            transition: all 1s ease;
        }

        .timeline-item.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .timeline-item:nth-child(odd) { left: 0; text-align: right; }
        .timeline-item:nth-child(even) { left: 50%; text-align: left; }

        .timeline-dot {
            position: absolute;
            top: 50px;
            width: 20px;
            height: 20px;
            background: var(--bg-color);
            border: 3px solid var(--accent-pink);
            border-radius: 50%;
            z-index: 2;
            box-shadow: 0 0 15px var(--accent-pink);
            transition: transform 0.3s;
        }

        .timeline-item:nth-child(odd) .timeline-dot { right: -10px; }
        .timeline-item:nth-child(even) .timeline-dot { left: -10px; }

        .timeline-item:hover .timeline-dot {
            transform: scale(1.3);
            background: var(--accent-pink);
        }

        .timeline-date {
            color: var(--accent-gold);
            font-size: 0.9rem;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .timeline-content {
            background: var(--card-bg);
            padding: 25px;
            border-radius: 15px;
            border: 1px solid var(--card-border);
            backdrop-filter: blur(5px);
            transition: transform 0.3s;
        }

        .timeline-content:hover {
            transform: translateY(-5px);
            background: rgba(255,255,255,0.08);
        }

        .timeline-title {
            font-size: 1.2rem;
            margin-bottom: 10px;
            color: var(--text-primary);
        }

        .timeline-desc {
            font-size: 0.95rem;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        /* ==================== åœºæ™¯å››ï¼šäº’åŠ¨è®¸æ„¿ç“¶ ==================== */
        .wish-bottle-container {
            text-align: center;
            margin: 100px 0;
        }

        .bottle-btn {
            background: transparent;
            border: 2px solid var(--accent-pink);
            color: var(--accent-pink);
            padding: 15px 40px;
            font-size: 1.1rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.4s;
            position: relative;
            overflow: hidden;
            font-family: inherit;
        }

        .bottle-btn:hover {
            background: var(--accent-pink);
            color: #fff;
            box-shadow: 0 0 30px rgba(244, 114, 182, 0.6);
        }

        .wish-modal {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8);
            backdrop-filter: blur(5px);
            z-index: 2000;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.5s;
        }

        .wish-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .wish-card {
            background: #fff;
            color: #333;
            width: 90%;
            max-width: 500px;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            transform: scale(0.8);
            transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
        }

        .wish-modal.active .wish-card {
            transform: scale(1);
        }

        .wish-input {
            width: 100%;
            padding: 15px;
            margin: 20px 0;
            border: 2px solid #eee;
            border-radius: 10px;
            font-size: 1rem;
            font-family: inherit;
            resize: none;
            outline: none;
            transition: border-color 0.3s;
        }

        .wish-input:focus {
            border-color: var(--accent-pink);
        }

        .send-wish-btn {
            background: linear-gradient(135deg, var(--accent-pink), #ec4899);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 1rem;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .send-wish-btn:hover {
            transform: scale(1.05);
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 24px;
            cursor: pointer;
            color: #999;
        }

        /* æ¼‚æµ®ç²’å­ */
        .floating-particle {
            position: absolute;
            background: rgba(255,255,255,0.5);
            border-radius: 50%;
            pointer-events: none;
            animation: floatUp linear forwards;
        }

        @keyframes floatUp {
            to { transform: translateY(-100px); opacity: 0; }
        }

        /* é¡µè„š */
        footer {
            text-align: center;
            padding: 50px 0;
            color: var(--text-secondary);
            font-size: 0.9rem;
            border-top: 1px solid var(--card-border);
            margin-top: 50px;
        }

        .heart-beat {
            color: var(--accent-pink);
            display: inline-block;
            animation: heartbeat 1.5s infinite;
        }

        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        /* ç§»åŠ¨ç«¯é€‚é… */
        @media (max-width: 768px) {
            .timeline-line { left: 20px; }
            .timeline-item { width: 100%; left: 0 !important; padding-left: 60px; text-align: left !important; }
            .timeline-item:nth-child(odd) .timeline-dot,
            .timeline-item:nth-child(even) .timeline-dot { left: 10px; right: auto; }
            .photo-wall { height: auto; flex-direction: column; align-items: center; gap: 40px; padding-top: 80px;}
            .rope { display: none; }
            .polaroid { position: relative; top: auto !important; left: auto !important; transform: none !important; }
            .polaroid:hover { transform: scale(1.05) !important; }
        }
    </style>
</head>
<body>

    <!-- åœºæ™¯ä¸€ï¼šä¿¡å°å¼€åœº -->
    <div id="intro-overlay">
        <div class="envelope-container" id="envelope" onclick="openEnvelope()">
            <div class="envelope">
                <div class="envelope-flap"></div>
                <div class="envelope-body"></div>
                <div class="letter-preview">
                    <h3>To: æˆ‘æœ€çˆ±çš„å¥³å­©</h3>
                    <p>è¿™é‡Œè—ç€<br>æˆ‘æƒ³å¯¹ä½ è¯´çš„<br>æ‚„æ‚„è¯...</p>
                    <div style="margin-top:15px; font-size:20px;">ğŸ’Œ</div>
                </div>
            </div>
        </div>
        <div class="click-hint">ç‚¹å‡»ä¿¡å°å¼€å¯æˆ‘ä»¬çš„æ•…äº‹</div>
    </div>

    <!-- èƒŒæ™¯æ˜Ÿç©º -->
    <canvas id="star-canvas"></canvas>

    <!-- ä¸»å†…å®¹ -->
    <div id="main-content">
        
        <!-- æ¬¢è¿è¯­ -->
        <div class="container" style="text-align: center; padding-top: 150px;">
            <h1 style="font-size: 3rem; margin-bottom: 20px; background: linear-gradient(to right, #f472b6, #fbbf24); -webkit-background-clip: text; color: transparent;">é‡è§ä½ ï¼Œæ˜¯é“¶æ²³èµ äºˆæˆ‘çš„ç³–</h1>
            <p class="subtitle">è®°å½•æˆ‘ä»¬åœ¨ä¸€èµ·çš„æ¯ä¸€ä¸ªé—ªå…‰ç¬é—´</p>
        </div>

        <!-- åœºæ™¯äºŒï¼šæ‹ç«‹å¾—ç…§ç‰‡å¢™ -->
        <div class="container">
            <h2 class="section-title">æ—¶å…‰èƒ¶å·</h2>
            <p class="subtitle">æ¯ä¸€å¼ ç…§ç‰‡ï¼Œéƒ½æ˜¯ä¸€æ®µæœªå®Œå¾…ç»­çš„æ•…äº‹</p>
            
            <div class="photo-wall" id="photoWall">
                <div class="rope"></div>
                <!-- ç…§ç‰‡ 1 -->
                <div class="polaroid" style="top: 80px; left: 10%; transform: rotate(-5deg);" onclick="flipCard(this)">
                    <img src="https://images.unsplash.com/photo-1516589178581-6cd7833ae3b2?w=400" alt="ç›¸é‡">
                    <div class="polaroid-caption">åˆé‡çš„é‚£å¤© â˜•ï¸</div>
                    <div class="polaroid-back">
                        <p>é‚£å¤©é˜³å…‰æ­£å¥½ï¼Œä½ ç©¿ç€ç™½è‰²çš„è£™å­ç¬‘èµ·æ¥ï¼Œæˆ‘å°±çŸ¥é“ï¼Œæˆ‘çš„ä¸–ç•Œé‡Œå¤šäº†ä¸€æŸå…‰ã€‚</p>
                    </div>
                </div>
                <!-- ç…§ç‰‡ 2 -->
                <div class="polaroid" style="top: 60px; left: 35%; transform: rotate(3deg);" onclick="flipCard(this)">
                    <img src="https://images.unsplash.com/photo-1529333166437-7750a6dd5a70?w=400" alt="æ—…è¡Œ">
                    <div class="polaroid-caption">ç¬¬ä¸€æ¬¡æ—…è¡Œ âœˆï¸</div>
                    <div class="polaroid-back">
                        <p>å’Œä½ ä¸€èµ·çœ‹è¿‡çš„é£æ™¯ï¼Œéƒ½å˜æˆäº†æˆ‘è®°å¿†é‡Œæœ€æ¸©æŸ”çš„åº•è‰²ã€‚</p>
                    </div>
                </div>
                <!-- ç…§ç‰‡ 3 -->
                <div class="polaroid" style="top: 90px; left: 60%; transform: rotate(-4deg);" onclick="flipCard(this)">
                    <img src="https://images.unsplash.com/photo-1511895426328-dc8714191300?w=400" alt="æ—¥å¸¸">
                    <div class="polaroid-caption">å¹³å‡¡çš„å‘¨æœ« ğŸ </div>
                    <div class="polaroid-back">
                        <p>å“ªæ€•åªæ˜¯ååœ¨ä¸€èµ·å‘å‘†ï¼Œåªè¦æœ‰ä½ åœ¨ï¼Œå°±æ˜¯æœ€ç¾å¥½çš„æ—¶å…‰ã€‚</p>
                    </div>
                </div>
                <!-- ç…§ç‰‡ 4 -->
                <div class="polaroid" style="top: 70px; left: 80%; transform: rotate(6deg);" onclick="flipCard(this)">
                    <img src="https://images.unsplash.com/photo-1519741497674-611481863552?w=400" alt="çºªå¿µæ—¥">
                    <div class="polaroid-caption">ç‰¹åˆ«çš„çºªå¿µæ—¥ ğŸ‚</div>
                    <div class="polaroid-back">
                        <p>è°¢è°¢ä½ æ„¿æ„é™ªæˆ‘è¿™ä¸ªç¬¨è›‹ï¼Œèµ°è¿‡ä¸€å¹´åˆä¸€å¹´ã€‚çˆ±ä½ ï¼Œä¸æ­¢ä»Šå¤©ã€‚</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- åœºæ™¯ä¸‰ï¼šæ˜Ÿç©ºè¿çº¿æ—¶é—´è½´ -->
        <div class="container timeline-section">
            <h2 class="section-title">çˆ±çš„è¶³è¿¹</h2>
            <div class="timeline-line"></div>
            
            <div class="timeline-item">
                <div class="timeline-dot"></div>
                <div class="timeline-content">
                    <div class="timeline-date">2023.05.20</div>
                    <h3 class="timeline-title">ğŸ’Œ ç¬¬ä¸€å°æƒ…ä¹¦</h3>
                    <p class="timeline-desc">é¼“èµ·å‹‡æ°”å†™ä¸‹ç¬¬ä¸€å°ä¿¡ï¼Œæ‰‹å¿ƒå…¨æ˜¯æ±—ï¼Œå´åªæƒ³æŠŠæœ€å¥½çš„éƒ½ç»™ä½ ã€‚</p>
                </div>
            </div>

            <div class="timeline-item">
                <div class="timeline-dot"></div>
                <div class="timeline-content">
                    <div class="timeline-date">2023.08.15</div>
                    <h3 class="timeline-title">ğŸŒŠ æµ·è¾¹èª“è¨€</h3>
                    <p class="timeline-desc">æµ·æµªå£°å¾ˆå¤§ï¼Œä½†æˆ‘è¯´â€œå–œæ¬¢ä½ â€çš„å£°éŸ³ï¼Œå¸Œæœ›ä½ å¬å¾—æ¸…æ¸…æ¥šæ¥šã€‚</p>
                </div>
            </div>

            <div class="timeline-item">
                <div class="timeline-dot"></div>
                <div class="timeline-content">
                    <div class="timeline-date">2024.02.14</div>
                    <h3 class="timeline-title">ğŸŒ¹ ç¬¬ä¸€ä¸ªæƒ…äººèŠ‚</h3>
                    <p class="timeline-desc">ç«ç‘°ä¼šæ¯èï¼Œä½†æƒ³é™ªä½ è¿‡æ¯ä¸€ä¸ªæƒ…äººèŠ‚çš„å¿ƒæ„ï¼Œæ°¸ä¸å‡‹é›¶ã€‚</p>
                </div>
            </div>

            <div class="timeline-item">
                <div class="timeline-dot"></div>
                <div class="timeline-content">
                    <div class="timeline-date">Future</div>
                    <h3 class="timeline-title">ğŸ¡ æœªæ¥çš„å®¶</h3>
                    <p class="timeline-desc">æƒ³è±¡ç€æˆ‘ä»¬ä¸€èµ·è£…ä¿®æˆ¿å­ï¼Œå…»ä¸€åªçŒ«ï¼Œå‚æ™šä¸€èµ·åšé¥­...è¿™å°±æ˜¯æˆ‘æƒ³è¦çš„ç”Ÿæ´»ã€‚</p>
                </div>
            </div>
        </div>

        <!-- åœºæ™¯å››ï¼šäº’åŠ¨è®¸æ„¿ç“¶ -->
        <div class="container wish-bottle-container">
            <h2 class="section-title">ç»™æœªæ¥çš„æˆ‘ä»¬</h2>
            <p class="subtitle" style="margin-bottom: 30px;">å†™ä¸‹ä¸€ä¸ªæ„¿æœ›ï¼ŒæŠŠå®ƒå­˜è¿›æˆ‘ä»¬çš„æ—¶å…‰ç“¶é‡Œ</p>
            <button class="bottle-btn" onclick="openWishModal()">âœ¨ æ”¾å…¥è®¸æ„¿ç“¶</button>
        </div>

        <footer>
            <p>Made with <span class="heart-beat">â¤</span> for You</p>
            <p>Â© 2024 Our Love Story. Forever & Always.</p>
        </footer>
    </div>

    <!-- è®¸æ„¿å¼¹çª— -->
    <div class="wish-modal" id="wishModal">
        <div class="wish-card">
            <span class="close-modal" onclick="closeWishModal()">&times;</span>
            <h3 style="color: var(--accent-pink); margin-bottom: 15px;">ğŸŒŸ æ—¶å…‰è®¸æ„¿ç“¶</h3>
            <p style="font-size: 0.9rem; color: #666;">äº²çˆ±çš„ï¼Œä½ æƒ³å’Œæˆ‘ä»¬æœªæ¥çš„è‡ªå·±è¯´ä»€ä¹ˆï¼Ÿ</p>
            <textarea class="wish-input" rows="4" placeholder="ä¾‹å¦‚ï¼šå¸Œæœ›æ˜å¹´çš„ä»Šå¤©ï¼Œæˆ‘ä»¬å·²ç»åœ¨å¤§ç†çœ‹è‹å±±æ´±æµ·äº†..."></textarea>
            <button class="send-wish-btn" onclick="saveWish()">å°å­˜æ„¿æœ›</button>
        </div>
    </div>

    <script>
        // ==================== 1. ä¿¡å°å¼€å¯é€»è¾‘ ====================
        function openEnvelope() {
            const envelope = document.getElementById('envelope');
            const overlay = document.getElementById('intro-overlay');
            const mainContent = document.getElementById('main-content');

            if (!envelope.classList.contains('open')) {
                envelope.classList.add('open');
                
                // ç­‰å¾…ä¿¡å°åŠ¨ç”»å®Œæˆåæ·¡å‡º
                setTimeout(() => {
                    overlay.style.opacity = '0';
                    overlay.style.visibility = 'hidden';
                    
                    // æ˜¾ç¤ºä¸»å†…å®¹
                    mainContent.style.display = 'block';
                    // å¼ºåˆ¶é‡ç»˜ä»¥è§¦å‘ transition
                    setTimeout(() => {
                        mainContent.style.opacity = '1';
                        initStars(); // å¯åŠ¨æ˜Ÿç©º
                    }, 100);
                }, 1200);
            }
        }

        // ==================== 2. æ‹ç«‹å¾—ç¿»è½¬é€»è¾‘ ====================
        function flipCard(element) {
            // å…ˆç¿»å›å…¶ä»–å¡ç‰‡ï¼ˆå¯é€‰ï¼Œå¦‚æœæƒ³è¦äº’æ–¥æ•ˆæœï¼‰
            document.querySelectorAll('.polaroid').forEach(card => {
                if (card !== element) card.classList.remove('flipped');
            });
            // ç¿»è½¬å½“å‰å¡ç‰‡
            element.classList.toggle('flipped');
        }

        // ==================== 3. æ»šåŠ¨è§¦å‘åŠ¨ç”» (æ—¶é—´è½´) ====================
        const observerOptions = {
            threshold: 0.2,
            rootMargin: "0px"
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    // å¯é€‰ï¼šåªè§¦å‘ä¸€æ¬¡
                    // observer.unobserve(entry.target); 
                }
            });
        }, observerOptions);

        document.querySelectorAll('.timeline-item').forEach(item => {
            observer.observe(item);
        });

        // ==================== 4. å”¯ç¾æ˜Ÿç©ºèƒŒæ™¯ (Canvas) ====================
        function initStars() {
            const canvas = document.getElementById('star-canvas');
            const ctx = canvas.getContext('2d');
            let width, height;
            let stars = [];

            function resize() {
                width = window.innerWidth;
                height = window.innerHeight;
                canvas.width = width;
                canvas.height = height;
                createStars();
            }

            function createStars() {
                stars = [];
                const numStars = Math.floor((width * height) / 4000); // å¯†åº¦æ§åˆ¶
                for (let i = 0; i < numStars; i++) {
                    stars.push({
                        x: Math.random() * width,
                        y: Math.random() * height,
                        radius: Math.random() * 1.5,
                        alpha: Math.random(),
                        speed: Math.random() * 0.05 + 0.01
                    });
                }
            }

            function animate() {
                ctx.clearRect(0, 0, width, height);
                ctx.fillStyle = "#0f172a"; // èƒŒæ™¯è‰²è¦†ç›–ï¼ˆå¯é€‰ï¼Œå¦‚æœ body æœ‰èƒŒæ™¯å¯çœç•¥ï¼‰
                
                stars.forEach(star => {
                    ctx.beginPath();
                    ctx.arc(star.x, star.y, star.radius, 0, Math.PI * 2);
                    ctx.fillStyle = `rgba(255, 255, 255, ${star.alpha})`;
                    ctx.fill();

                    // é—ªçƒæ•ˆæœ
                    star.alpha += (Math.random() - 0.5) * 0.05;
                    if (star.alpha < 0.1) star.alpha = 0.1;
                    if (star.alpha > 0.8) star.alpha = 0.8;

                    // ç¼“æ…¢ç§»åŠ¨
                    star.y -= star.speed;
                    if (star.y < 0) star.y = height;
                });

                requestAnimationFrame(animate);
            }

            window.addEventListener('resize', resize);
            resize();
            animate();
        }

        // ==================== 5. è®¸æ„¿ç“¶é€»è¾‘ ====================
        const modal = document.getElementById('wishModal');

        function openWishModal() {
            modal.classList.add('active');
        }

        function closeWishModal() {
            modal.classList.remove('active');
        }

        function saveWish() {
            const input = document.querySelector('.wish-input');
            const text = input.value.trim();
            
            if (!text) {
                alert("è¯·å…ˆå†™ä¸‹ä½ çš„æ„¿æœ›å“¦~");
                return;
            }

            // æ¨¡æ‹Ÿä¿å­˜
            const btn = document.querySelector('.send-wish-btn');
            const originalText = btn.innerText;
            btn.innerText = "âœ¨ å·²å°å­˜ ...";
            btn.disabled = true;

            // äº§ç”Ÿç²’å­ç‰¹æ•ˆ
            createParticles(window.innerWidth / 2, window.innerHeight / 2);

            setTimeout(() => {
                closeWishModal();
                input.value = "";
                btn.innerText = originalText;
                btn.disabled = false;
                alert("æ„¿æœ›å·²å­˜å…¥æˆ‘ä»¬çš„æ—¶å…‰ç“¶ï¼Œæœªæ¥ä¸€å®šä¼šå®ç°ï¼ğŸ’•");
            }, 1500);
        }

        // å…³é—­å¼¹çª—ç‚¹å‡»å¤–éƒ¨
        modal.addEventListener('click', (e) => {
            if (e.target === modal) closeWishModal();
        });

        // ==================== 6. ç²’å­ç‰¹æ•ˆè¾…åŠ©å‡½æ•° ====================
        function createParticles(x, y) {
            const colors = ['#f472b6', '#fbbf24', '#ffffff'];
            for (let i = 0; i < 30; i++) {
                const particle = document.createElement('div');
                particle.classList.add('floating-particle');
                document.body.appendChild(particle);

                const size = Math.random() * 8 + 4;
                const destX = (Math.random() - 0.5) * 200;
                const destY = (Math.random() - 0.5) * 200;
                
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                particle.style.left = `${x}px`;
                particle.style.top = `${y}px`;
                particle.style.background = colors[Math.floor(Math.random() * colors.length)];
                particle.style.transition = 'all 1s ease-out';
                
                // å¼ºåˆ¶é‡ç»˜
                setTimeout(() => {
                    particle.style.transform = `translate(${destX}px, ${destY}px)`;
                    particle.style.opacity = 0;
                }, 10);

                setTimeout(() => {
                    particle.remove();
                }, 1000);
            }
        }
    </script>
</body>
</html>
